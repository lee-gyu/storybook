import{a as k}from"./chunks/chunk-TPOBF2FR.js";import"./chunks/chunk-QK7BS6IW.js";import"./chunks/chunk-HJRTLFPM.js";import{a as i}from"./chunks/chunk-ZSTOGUCC.js";import"./chunks/chunk-QBHXWPSD.js";var o=new Map,g=(()=>{let r=null;function a(t){let e=o.get(t);if(!e)throw new Error(`'${t}' taskLog is not defined`);return e}return()=>(r||(r=new Worker(new URL(k),{name:"ir-data-exporting-worker",type:"module"})),r.onmessage=t=>{var n;let e=t.data;if(!e.taskId)throw console.error(e),new Error("taskId is not defined.");let s=a(e.taskId);e.hasError?s.reject((n=e.error)!=null?n:new Error("unknown error")):s.resolve(e.objectURL),o.delete(e.taskId)},r.onerror=t=>{},r)})();function d(r){return new Promise((a,t)=>{let e=g();o.set(r.taskId,{taskId:r.taskId,createdDateTick:Date.now(),resolve:a,reject:t}),e.postMessage({command:"register-task-item",taskItem:r})})}function u(r){return d({taskId:i(),data:r.data,format:r.format,args:r.args})}export{u as requestExportingData};
