function g(e){return window.btoa(unescape(encodeURIComponent(e)))}function c(e){let a=new FileReader;return a.readAsDataURL(e),new Promise((t,n)=>{a.onloadend=()=>t(a.result),a.onerror=r=>n(r)})}function u(e){return URL.createObjectURL(new Blob([e.outerHTML],{type:"image/svg+xml"}))}function d(e){return`data:image/svg+xml;base64,${g(e.outerHTML)}`}function p(e,a){let t=document.createElement("a");t.href=e,t.download=a,t.click()}function f(e){return new Promise((a,t)=>{let n=new Image;n.addEventListener("load",()=>a(n)),n.addEventListener("error",r=>t(r)),n.src=e})}function m({img:e,cb:a,rect:t,margin:n=0}){let r=new OffscreenCanvas(e.naturalWidth,e.naturalHeight),i=r.getContext("2d");if(!i)throw new Error("Canvas context is null");let o=t!=null?t:{x:0,y:0,width:e.naturalWidth,height:e.naturalHeight};return r.width=o.width+n*2,r.height=o.height+n*2,i.fillStyle="white",i.fillRect(0,0,r.width,r.height),i.drawImage(e,o.x,o.y,o.width,o.height,n,n,o.width,o.height),a(r)}function b(e,a="image/png",t,n){return new Promise((r,i)=>{m({img:e,rect:t,margin:n,cb:o=>{o.convertToBlob({type:a}).then(r).catch(i)}})})}export{c as a,u as b,d as c,p as d,f as e,b as f};
