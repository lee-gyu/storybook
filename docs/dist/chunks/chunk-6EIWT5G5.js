import{a as de,b as I}from"./chunk-HM7E4RBT.js";import{a as B}from"./chunk-SAP32CJ3.js";import{R as G,S as K,T as S,U as Z,Ua as b,V as q,W as z,X,Y as J,Ya as ee,Z as Q,fb as x,hb as te,n as A,o as O,p as V,q as N,r as U,s as Y,t as F,u as W,v as $,w as j}from"./chunk-P5YJIQLH.js";import{c as y,g as P,o as w}from"./chunk-5PCD5M4R.js";import{d as se}from"./chunk-QBHXWPSD.js";var u={select:A,selectDropdown:O,selectDropdownList:F,selectDropdownButton:V,selectDropdownItem:U,selectDropdownIcon:N,selectInput:W,selectInputNative:j,selectInputIcon:$,selectDropdownItemSelected:Y},le=()=>{let o=document.createElement("div"),e=document.createElement("ul");return o.classList.add(u.selectDropdown,te.zIndex.popover),e.className=u.selectDropdownList,o.appendChild(e),{divDropdown:o,ulItems:e}},ae=(o,e)=>{let t=document.createElement("li"),n=document.createElement("button"),s=document.createElement("i"),d=document.createElement("span");return d.innerText=e,n.type="button",n.title=e,n.className=u.selectDropdownButton,t.className=u.selectDropdownItem,t.setAttribute("ir-select-value",o),s.classList.add(u.selectDropdownIcon,"ir-icon","ir-icon--check"),n.appendChild(s),n.append(d),t.append(n),{item:t,button:n,icon:s,span:d}},ne=class extends B{constructor(e){var d;super({contextElement:e instanceof HTMLSelectElement?e:e.contextElement}),this.floatingCleanup=()=>{},this.divSelect=document.createElement("div"),this.divInput=document.createElement("div"),this.inputValue=document.createElement("input");let t=le();this.divDropDown=t.divDropdown,this.ulItems=t.ulItems,this.items=[],this.select=this.contextElement;let n=document.createElement("i");this.inputValue.readOnly=!0,this.inputValue.type="text",this.divSelect.classList.add(u.select),this.select.classList.forEach(r=>this.divSelect.classList.add(r)),this.divInput.className=u.selectInput,this.inputValue.className=u.selectInputNative,n.classList.add(u.selectInputIcon,"ir-icon","ir-icon--chevron-down"),this.divInput.appendChild(this.inputValue),this.divInput.appendChild(n),this.divDropDown.appendChild(this.ulItems),this.divSelect.appendChild(this.divInput);let s=this.select.value;this._value="",Array.from(this.select.children).map(r=>r).forEach(r=>{let a={};for(let i=0;i<r.attributes.length;++i){let h=r.attributes.item(i);if(!h)return;a[h.name]=h.value}this.addItem(r.value,r.text,a),r.remove()}),e instanceof HTMLSelectElement?this.value=s:(e.onChange&&(this.onChange=e.onChange),this.disabled=(d=e.disabled)!=null?d:!1,e.defaultValue!==null&&(this.value=e.defaultValue||s),e.placeholder&&(this.inputValue.placeholder=e.placeholder)),this.select.insertAdjacentElement("beforebegin",this.divSelect),this.select.style.display="none",this.divInput.onclick=()=>this.toggle(),this.addCoreElement(this.divSelect),this.escController=P(this),this.outsideHandler=x({eventElements:[this.divSelect,this.divDropDown],clickOutsideFunc:()=>this.hide()})}get listItems(){return[...this.items]}get disabled(){return this.inputValue.hasAttribute("disabled")}get value(){return this._value}get text(){return this.inputValue.value}set disabled(e){e?this.inputValue.setAttribute("disabled","true"):this.inputValue.removeAttribute("disabled")}set value(e){if(this._value!==e)if(this.hasElementByValue(e))this.selectItem(e);else throw new Error(`There is no '${e}' value`)}clearItems(){this.lastClickedOption=void 0,this.items.forEach(({element:e,option:t})=>{e.remove(),t.remove()}),this.items=[],this.inputValue.value="",this.select.value="",this._value=""}removeItem(e){this.items.filter(t=>t.value===e).forEach(({element:t,option:n})=>{t.remove(),n.remove()}),this.items=this.items.filter(t=>t.value!==e)}expand(){this.disabled||(this.divDropDown.style.width=`${this.divSelect.offsetWidth}px`,this.divDropDown.isConnected||y("popover").appendChild(this.divDropDown),this.escController.create(),this.outsideHandler.create(),setTimeout(()=>{this.divSelect.classList.add("is-expanded"),this.divDropDown.classList.add("is-expanded"),this.floatingCleanup(),this.floatingCleanup=w(this.divSelect,this.divDropDown)},0))}hide(){this.floatingCleanup(),this.escController.destroy(),this.outsideHandler.destroy(),this.divSelect.classList.remove("is-expanded"),this.divDropDown.classList.remove("is-expanded"),this.divDropDown.addEventListener("transitionend",e=>{e.currentTarget===e.target&&this.divDropDown.remove()},{once:!0})}toggle(){this.divSelect.classList.contains("is-expanded")?this.hide():this.expand()}addItem(e,t,n={}){let{item:s,button:d}=ae(e,t),r=document.createElement("option");return Object.entries(n).forEach(([a,i])=>r.setAttribute(a,i)),r.value=e,r.innerText=t,this.select.appendChild(r),this.items.push({text:t,value:e,element:s,option:r,attr:n}),this.ulItems.appendChild(s),s.onclick=a=>{this.lastClickedOption!==r&&(this.clearSelectedStatus(),this.changeValue({text:t,value:e,attr:n,element:s,option:r})),this.hide()},d}onChange(e,t){}setValueWithoutEvent(e){if(this._value!==e)if(this.hasElementByValue(e))this.selectItem(e,!1);else throw new Error(`There is no '${e}' value`)}hasElementByValue(e){return[...this.ulItems.querySelectorAll("[ir-select-value]")].map(t=>t).some(t=>t.getAttribute("ir-select-value")===e)}clearSelectedStatus(){this.items.forEach(({element:e})=>e.classList.remove(u.selectDropdownItemSelected))}selectItem(e,t=!0){this.clearSelectedStatus();let n=this.getSelectedItemOrNull(e);n&&this.changeValue(n,t)}getSelectedItemOrNull(e){for(let t of this.items)if(t.value===e)return t;return null}changeValue({text:e,value:t,option:n,element:s},d=!0){this.lastClickedOption=n,s.classList.add(u.selectDropdownItemSelected),this.inputValue.value=e,this.select.value=t,this._value=t,d&&this.onChange(this.select,n)}};var H=class{constructor(e,...t){this._label=e,this._commands=t}pushCommand(e){this._commands.push(e)}execute(){let e=[];try{let t=0;for(;t<this._commands.length;){let n=this._commands[t];if(!n.canExecute)throw console.error(n),new Error("Can't execute this command");n.execute(),e.push(n),++t}}catch(t){return console.error("execute error!",t),e.reverse().forEach(n=>n.undo()),!1}return!0}undo(){let e=[];try{let t=this._commands.length-1;for(;t>=0;){let n=this._commands[t];if(!n.canUndo)throw console.error(n),new Error("Can't undo this command");n.undo(),e.push(n),--t}}catch(t){return console.error("undo error!",t),e.forEach(n=>n.execute()),!1}return!0}get label(){return this._label}};var ce=1024,ie=class{constructor({context:e,undoStackLength:t=ce,disabled:n=!1}){this._isPreventedUIRecording=!0;this._undoCommandStack=[];this._redoCommandStack=[];this._stackLength=t,this._disabled=n,this._context=e}doRecording(e="",t){if(this.isDisabled)return t();if(this.isRecording)throw new Error("Already doing record!");try{return this._currentRecordingBlock=new H(e),t(),this.pushCommandBlock(this._currentRecordingBlock),this._currentRecordingBlock}catch(n){console.error("Got an error during recording!"),console.error(n)}finally{this._currentRecordingBlock=void 0}}undo(){let e=this._undoCommandStack.pop();e&&e.undo()&&(this._redoCommandStack.push(e),this._context.onUndo(e))}redo(){let e=this._redoCommandStack.pop();e&&e.execute()&&(this._undoCommandStack.push(e),this._context.onRedo(e))}pushCommandBlock(e){this.isDisabled||(this._undoCommandStack.length>=this._stackLength&&this._undoCommandStack.shift(),this._undoCommandStack.push(e),this._redoCommandStack=[])}pushCommand(e){if(!this._currentRecordingBlock)throw new Error("Not recording!");this._currentRecordingBlock.pushCommand(e)}clearCommands(){this._undoCommandStack=[],this._redoCommandStack=[]}pauseUIRecording(){this._isPreventedUIRecording=!1}startUIRecording(){this._isPreventedUIRecording=!0}get canRecord(){return!this.isDisabled&&this.isRecording&&!this.isPreventedUIRecording}get isRecording(){return this._currentRecordingBlock!==void 0}get isPreventedUIRecording(){return this._isPreventedUIRecording}get isDisabled(){return this._disabled}get stackLength(){return this._stackLength}set stackLength(e){this._stackLength=e}set isDisabled(e){this._disabled=e}};var re=se(de(),1);var v={datePicker:G,datePickerHeader:J,datePickerHeaderTitle:Q,datePickerContent:K,datePickerFooter:X,datePickerContentCell:S,datePickerContentHeaderCell:q,datePickerContentTable:z};function me(){let o=document.createElement("div"),e=document.createElement("div"),t=document.createElement("button"),n=document.createElement("button"),s=document.createElement("strong"),d=document.createElement("button"),r=document.createElement("button"),a=document.createElement("div"),i=document.createElement("div");t.appendChild(b("ir-icon--chevron-double-left")),n.appendChild(b("ir-icon--chevron-left")),d.appendChild(b("ir-icon--chevron-right")),r.appendChild(b("ir-icon--chevron-double-right"));let h=document.createElement("div"),C=document.createElement("table"),T=document.createElement("thead"),l=document.createElement("tbody"),c=document.createElement("div");o.classList.add(v.datePicker),e.classList.add(v.datePickerHeader),s.classList.add(v.datePickerHeaderTitle),h.classList.add(v.datePickerContent),c.classList.add(v.datePickerFooter),a.appendChild(t),a.appendChild(n),i.appendChild(d),i.appendChild(r),e.appendChild(a),e.appendChild(s),e.appendChild(i);let f=["sun","mon","tue","wed","thu","fri","sat"],m=document.createElement("tr"),_={};f.forEach(g=>{let E=document.createElement("th");E.className=`${v.datePickerContentCell} ${v.datePickerContentHeaderCell}`,E.setAttribute("scope","col"),_[g]=E,m.appendChild(E)}),T.appendChild(m),C.className=v.datePickerContentTable,C.appendChild(T),C.appendChild(l),h.appendChild(C);let L=document.createElement("div"),p=document.createElement("button");return p.classList.add("button"),p.type="button",L.appendChild(p),c.appendChild(L),o.appendChild(e),o.appendChild(h),o.appendChild(c),{datePicker:o,headerTitle:s,contentTableTbody:l,headerPrev:n,headerNext:d,todayButton:p,headerNextYear:r,headerPrevYear:t,updateI18n:D};function D(){p.innerHTML="",p.appendChild(b("ir-icon--check","button__icon-prefix")),p.append(I.datePicker.btnToday),f.forEach(g=>_[g].innerText=I.common[g])}}var oe=(()=>{let o=null;return function(){return o||(o=me()),o}})();var R=o=>(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0),o),ue=6,he=7,pe=32,Ce=0,Ve=({uuid:o,refElement:e,onClick:t,minDate:n,maxDate:s})=>{let d=!1,r=()=>{},a=null;R(n),R(s);let i=oe(),h=x({eventElements:[i.datePicker],clickOutsideFunc:()=>C.hide()}),C={get visible(){return d},update(l,c){let f=R(new Date),m=R(new Date(l)),_=m.getMonth();i.headerPrev.onclick=()=>{l.setDate(Ce),this.update(l,c)},i.headerNext.onclick=()=>{l.setDate(pe),this.update(l,c)},i.headerPrevYear.onclick=()=>{l.setFullYear(l.getFullYear()-1),this.update(l,c)},i.headerNextYear.onclick=()=>{l.setFullYear(l.getFullYear()+1),this.update(l,c)},i.todayButton.onclick=()=>{t.call(null,f),this.update(f,f)};let L=f<n||f>s;i.todayButton.disabled=L;let p=i.todayButton.parentElement;L&&p&&a==null&&(a=ee({refElement:p,label:I.datePicker.disabledTodayTooltip,placement:"bottom"})),i.updateI18n(),i.headerTitle.innerText=(0,re.default)(m).format(I.datePicker.titleFormat),m.setDate(1),m.setDate(-(m.getDay()-1)),i.contentTableTbody.innerHTML="";for(let D=0;D<ue;D++){let g=document.createElement("tr");for(let E=0;E<he;E++){let k=document.createElement("td"),M=new Date(m);k.className=S,k.innerText=`${m.getDate()}`,k.onclick=()=>t(M),M<n||M>s?k.classList.add("is-disabled"):m.getMonth()!==_?k.classList.add("is-diff-month"):m.getTime()===(c==null?void 0:c.getTime())&&k.classList.add(Z),g.appendChild(k),m.setDate(m.getDate()+1)}i.contentTableTbody.appendChild(g)}},show(){d=!0,i.datePicker.isConnected||y("popover").appendChild(i.datePicker),i.datePicker.style.removeProperty("display"),i.datePicker.setAttribute("data-for",o),h.create(),T.create(),setTimeout(()=>{i.datePicker.classList.add("is-visible"),r(),r=w(e,i.datePicker)},0)},hide(){h.destroy(),T.destroy(),a&&(a.destroy(),a=null);let l=c=>{c.currentTarget===c.target&&(d=!1,i.datePicker.removeEventListener("transitionend",l),o===i.datePicker.getAttribute("data-for")&&(r(),i.datePicker.remove()))};i.datePicker.addEventListener("transitionend",l),i.datePicker.classList.remove("is-visible")},onESC(){this.hide()}},T=P(C);return C};export{le as a,ae as b,ne as c,Ve as d,H as e,ie as f};
