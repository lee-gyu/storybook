import{g as M,e as n,d as v,i as y,_ as H,b as N,c as O,f as S,I as A}from"./timePicker.elements-78bcdb3d.js";import{a as V,b as Y,f as $,s as F,g as R,o as B,c as W,I as U}from"./index-c7da6992.js";const K=()=>{const i=document.createElement("div");return i.className="tooltip",{tooltipElement:i,updateText(t){i.textContent=t}}},X=(()=>{let i=null;return()=>(i||(i=K()),i)})(),j=i=>{var t;let d=(t=i.label)!==null&&t!==void 0?t:"";const{refElement:o,offset:f=8,placement:u="bottom",refMode:p="element"}=i,{tooltipElement:l,updateText:b}=X();let c=o;const m=()=>{V(c,l,{placement:u,strategy:"fixed",middleware:[Y(f),$(),F({padding:5})]}).then(({x:h,y:x})=>{l.style.left=`${h}px`,l.style.top=`${x}px`})},a=h=>{c=R(h.clientX,h.clientY),m()},e=()=>{if(d===""){console.warn("tooltip text is empty!",o);return}b(d),M("popover").appendChild(l),m()},r=()=>{e(),o.addEventListener("mousemove",a)},s=()=>{l.remove(),o.removeEventListener("mousemove",a)},D=p==="element"?e:r;return o.addEventListener("mouseenter",D),o.addEventListener("mouseleave",s),{destroy(){s(),o.removeEventListener("mouseenter",D),o.removeEventListener("mouseleave",s)},updateText(h){d=h},hide(){return s(),this},show(){return this.update(),e(),this},update(){return m(),this},get text(){return d}}},E="checkbox",g={checkbox:{"&":E},checkboxInput:{"&":`${E}__input`},checkboxWrapper:{"&":`${E}__wrapper`},text:{"&":`${E}__text`}},P=i=>(i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0),i),q=6,G=7,Z=32,z=0,J=({uuid:i,refElement:t,onClick:d,minDate:o,maxDate:f})=>{let u=!1,p=()=>{},l=null;P(o),P(f);const b=W({eventElements:[n.datePicker],clickOutsideFunc:()=>c.hide()}),c={get visible(){return u},update(a,e){const r=new Date,s=P(new Date(a)),D=s.getMonth();n.headerPrev.onclick=()=>{a.setDate(z),this.update(a,e)},n.headerNext.onclick=()=>{a.setDate(Z),this.update(a,e)},n.headerPrevYear.onclick=()=>{a.setFullYear(a.getFullYear()-1),this.update(a,e)},n.headerNextYear.onclick=()=>{a.setFullYear(a.getFullYear()+1),this.update(a,e)},n.todayButton.onclick=()=>{d.call(null,r),this.update(r,r)};const h=r<o||r>f;n.todayButton.disabled=h;const x=n.todayButton.parentElement;h&&x&&l==null&&(l=j({refElement:x,label:y.datePicker.disabledTodayTooltip,placement:"bottom"})),n.updateI18n(),n.headerTitle.innerText=v(s).format(y.datePicker.titleFormat),s.setDate(1),s.setDate(-(s.getDay()-1)),n.contentTableTbody.innerHTML="",H.range(q).forEach(()=>{const L=document.createElement("tr");for(let w=0;w<G;w++){const k=document.createElement("td"),_=new Date(s);k.innerText=`${s.getDate()}`,k.onclick=()=>d(_),_<o||_>f?k.classList.add("is-disabled"):s.getMonth()!==D?k.classList.add("is-diff-month"):s.getTime()===(e==null?void 0:e.getTime())&&k.classList.add("is-selected"),L.appendChild(k),s.setDate(s.getDate()+1)}n.contentTableTbody.appendChild(L)})},show(){u=!0,n.datePicker.isConnected||M("popover").appendChild(n.datePicker),n.datePicker.style.removeProperty("display"),n.datePicker.setAttribute("data-for",i),b.create(),m.create(),setTimeout(()=>{n.datePicker.classList.add(N.datePicker["is-visible"]),p(),p=B(t,n.datePicker)},0)},hide(){b.destroy(),m.destroy(),l&&(l.destroy(),l=null);const a=e=>{e.currentTarget===e.target&&(u=!1,n.datePicker.removeEventListener("transitionend",a),i===n.datePicker.getAttribute("data-for")&&(p(),n.datePicker.remove()))};n.datePicker.addEventListener("transitionend",a),n.datePicker.classList.remove(N.datePicker["is-visible"])},onESC(){this.hide()}},m=O(c);return c},C="input",T={input:{"&":C},inputNative:{"&":`${C}__native`},inputSuffix:{"&":`${C}__suffix`},inputPrefix:{"&":`${C}__prefix`}},I=(i,t)=>i instanceof Date?v(i).startOf("D"):typeof i=="string"?v(i,t):v(null);class te extends U{constructor({div:t,defaultDate:d,format:o=y.datePicker.dateFormat,checkbox:f=!1,disabled:u=!1,allowedEmptyString:p=!0,onSelect:l,onChange:b,onCheckboxClick:c,minDate:m=A.datePicker.minDate,maxDate:a=A.datePicker.maxDate}){if(super({contextElement:t}),this.selectedDate=null,this.calendarDate=new Date,d){const e=I(d,o);e.isValid()?(this.calendarDate=e.toDate(),this.selectedDate=e.toDate()):console.error(`invalid defaultDate format. it must follow ${o}`)}if(!p&&this.selectedDate==null){const e=I(new Date,o);this.calendarDate=e.toDate(),this.selectedDate=e.toDate()}if(this.format=o,this.div=t,this.input=document.createElement("input"),this.button=document.createElement("button"),this.button.appendChild(S("ir-icon--calendar")),this.div.innerHTML="",this.div.classList.add(T.input["&"]),this.input.setAttribute("type","text"),this.input.setAttribute("placeHolder",this.format),this.input.className=T.inputNative["&"],this.button.className=T.inputSuffix["&"],this.button.type="button",this._minDate=m,this._maxDate=a,l&&(this.onSelect=l),b&&(this.onChange=b),c&&(this.onCheckboxClick=c),f){const e=document.createElement("div"),r=document.createElement("label"),s=document.createElement("input");s.setAttribute("type","checkbox"),e.classList.add(g.checkbox["&"],T.inputPrefix["&"]),r.className=g.checkboxWrapper["&"],s.className=g.checkboxInput["&"],r.appendChild(s),e.appendChild(r),this.div.appendChild(e),s.checked=!u,s.onchange=()=>{this.disabled=!s.checked,this.onCheckboxClick(s.checked)},this.addCoreElement(e)}this.disabled=u,this.div.appendChild(this.input),this.div.appendChild(this.button),this.addCoreElement(this.input),this.addCoreElement(this.button),this.selectedDate&&(this.input.value=v(this.selectedDate).format(o)),this.button.addEventListener("click",()=>{this.isVisible===!1&&this.show()}),this.input.addEventListener("blur",()=>{if(this.input.value===""){p?this.setDate(null):this.setDate(this.selectedDate);return}const e=v(this.input.value,this.format,!0);!e.isValid()||e.toDate()<this.minDate||e.toDate()>this.maxDate?this.setDate(this.selectedDate):this.setDate(e.toDate())}),this.handler=J({uuid:this.uuid,refElement:this.div,minDate:this._minDate,maxDate:this._maxDate,onClick:e=>{this.setDate(e),this.onSelect(e),this.hide()}})}get textValue(){return this.input.value}get inputCheckbox(){return this.div.querySelector(".checkbox__input")}get date(){return this.selectedDate}get isVisible(){return this.handler.visible}get disabled(){return this.input.hasAttribute("disabled")}get minDate(){return this._minDate}get maxDate(){return this._maxDate}set minDate(t){this._minDate=t}set maxDate(t){this._maxDate=t}set disabled(t){t?(this.input.setAttribute("disabled",""),this.button.setAttribute("disabled","")):(this.input.removeAttribute("disabled"),this.button.removeAttribute("disabled")),this.inputCheckbox&&(this.inputCheckbox.checked=!t)}setDate(t){t?(this.selectedDate=new Date(t),this.calendarDate=new Date(t),this.input.value=v(t).format(this.format),this.updateCalendar()):(this.selectedDate=null,this.input.value=""),this.latestValue!==this.input.value&&this.onChange(this.input.value),this.latestValue=this.input.value}show(){this.isVisible||(this.handler.update(this.calendarDate,this.selectedDate),this.handler.show())}hide(){this.isVisible&&this.handler.hide()}onSelect(t){}onChange(t){}onCheckboxClick(t){}updateCalendar(){this.handler.update(this.calendarDate,this.selectedDate)}}export{te as I};
//# sourceMappingURL=datePicker-32614ab4.js.map
